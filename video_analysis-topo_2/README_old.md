# Readme

## How to start a sample run

**Note** : I'm assuming that all commands are executed in the project's root directory

1. Place video files in some directory. `~/Videos` would be fine
2. Write an input file according to the convention mentioned in  `sample_files/`
3. Run the experiment with the following string
    `./run.sh <experiment number> 0`
    This generates 
    * The topology
    * The traffic generating script
    * The `tc` on the links
4. After executing `run.sh`, a Mininet console should open up. In the Mininet console, enter the command to start generating traffic
    `source str_scr`
5. This will generate
    * received video files in mp4 format in video named folder 
    * `tcpdump` files from sender and receiver in pcap format in pcapfile named folder 
    * buffer occupancy stat file in txt format

## Plotting generated data
1. Depending on whether this was a baseline reading or a h2dq reading, move the generated files to `stat/base/<experiment number>`
2. Generate the data out of the raw files using the commands at `data_scripts/`
3. Once the data has been generated, plot them using the scripts at `plot_scripts/plt_and_move.sh`



## List of all files

```
├── bw_opti.py                  # performs optimization on available b/w
├── create_topo.py              # creates the virtual topology | runs the optimization | applies tc on links
├── exp_monitor.py              # monitors buffer occupancy of an interface
├── str_scr                     # mininet script to generate traffic, which is generated by utility_scripts/create_miniscr.py
├── README.md
├── run.sh                      # call utility_scripts/create_miniscr.py and create_topo.py
├── tc_cmd_base.sh              # applies tc on links for the base case
├── tc_cmd_diff.sh              # applies tc on links for the differentiated traffic case
|
├── data_scripts                # gathers data from all raw files and creates csv files
│   ├── all_tput.py             # get throughput from pcap file
│   ├── get_psnr.cpp            # get psnr from video file source code
│   ├── opencv_compile.sh       # compiles the above cpp file
│   ├── pcap_to_csv.py          # converts the pcap files to csv files with the required attributes only
│   ├── tcp_jain.py             # gets jain fairness index from the csv files
│   ├── tcp_rtt.py              # gets round trip time
│   ├── udp_delay.py            # gets UDP delay by comparing send and receive csv files
│   ├── udp_loss.py             # gets UDP loss by comparing send and receive csv files
│   ├── vid_qoe_1.py
│   ├── vid_qoe_2.py
│   ├── vid_qoe_psnr.py         # calls get_psnr.cpp internally
│   ├── vid_shfair.py           # gets short-term fairness of UDP streams
│   └── vid_tput_indi.py        # gets throughput of individual TCP streams generated by parallel iperf
|
├── plot_scripts                # contains all plotting scripts
|   |
│   ├── plt_all_tput.py         # plots throughput for base and diff cases
│   ├── plt_and_move.sh         # plot all stats and move them to plot folder
│   ├── plt_tcp_rtt.py          # plot tcp rtt
│   ├── plt_udp_delay.py        # plot udp delay
│   ├── plt_udp_loss.py         # plot udp loss
│   ├── plt_vid_jain.py         # plot jain fairness index for video traffic
│   ├── plt_vid_psnr.py         # plot PSNR for video traffic
│   └── plt_vid_shjain.py       # plot short term jain fairness index
├── sample_files
│   ├── exp_cases_backup        # backup of input files for 4 cases
│   │   ├── input_file_1
│   │   ├── input_file_2
│   │   ├── input_file_3
│   │   └── input_file_4
│   └── input_file
├── stats                       # stores all statistics
│   ├── base                    # for base case
│   │   ├── case1
│   │   ├── case2								 
│   │   ├── case3
│   │   └── case4
│   ├── csv
│   │   └── initial_data
│   ├── h2dq                    # for h2dq case
│   │   ├── case1
│   │   ├── case2
│   │   ├── case3
│   │   └── case4
│   └── plots                   # stores the final plotted files
└── utility_scripts
    ├── a.out
    ├── create_miniscr.py       # creates mininet script which will generate all traffic
    ├── misc_func.py            # contains all functions which are used by all other python scripts
    ├── misc_func.pyc
    ├── tcp_rec                 # parallel iperf server
    ├── tcp_snd                 # parallel iperf client
    ├── vlc_rec.py              # vlc video receiver
    └── vlc_snd.py              # vlc video sender
```

## Compile String for openCV PSNR cpp file
g++ `pkg-config --cflags opencv` get_psnr.cpp -o get_psnr `pkg-config --libs opencv`
